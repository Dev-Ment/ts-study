# ğŸ’« 10. ìƒíƒœê´€ë¦¬

- ë¦¬ì•¡íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì—­í• ì„ í•˜ëŠ” ìƒíƒœì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.
- ê¸°ë³¸ì ì¸ **ìƒíƒœì˜ ê°œë…**ì„ ìµíˆê³  ì–´ë–»ê²Œ í•˜ë©´ **íš¨ìœ¨ì ìœ¼ë¡œ ìƒíƒœë¥¼ ê´€ë¦¬**í•  ìˆ˜ ì‚´í´ë³´ì.

---

# 10.1 ìƒíƒœê´€ë¦¬

## 10.1.1 ìƒíƒœ(state)

> ğŸ“š ê³µì‹ë¬¸ì„œì—ì„œì˜ ìƒíƒœë€?  
> "ëœë”ë§ ê²°ê³¼ì— ì˜í–¥ì„ ì£¼ëŠ” ì •ë³´ë¥¼ ë‹´ì€ ìˆœìˆ˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´"

ë¦¬ì•¡íŠ¸ì—ì„œ ìƒíƒœëŠ” **ì‹œê°„ì´ ì§€ë‚˜ë©´ì„œ ë³€í•  ìˆ˜ ìˆëŠ” ë™ì ì¸ ë°ì´í„°**ì´ë©°, **ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ê²°ê³¼ë¬¼**ì— ì˜í–¥ì„ ì¤€ë‹¤.

- ë¦¬ì•¡íŠ¸ì—ì„œ ìƒíƒœëŠ” 1)ì§€ì—­ìƒíƒœ, 2)ì „ì—­ìƒíƒœ, 3) ì„œë²„ ìƒíƒœ ë¡œ ë¶„ë¥˜
- ë‚´ë¶€ apië§Œì„ ì´ìš©í•´ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë‚˜, ì„±ëŠ¥ê³¼ ë³µì¡ì„±ìœ¼ë¡œì¸í•´ Redux, MobX, Recoilê³¼ ê°™ì€ ì™¸ë¶€ ìƒíƒœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©

### ì§€ì—­ ìƒíƒœ(Local State)

- **ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€**ì—ì„œ ì‚¬ìš©ë˜ëŠ” ìƒíƒœë¡œ ì£¼ë¡œ `useState, useReducer` í›…ì„ ì‚¬ìš©í•œë‹¤.
- ì˜ˆ ) ì²´í¬ë°•ìŠ¤ì˜ ì²´í¬ì—¬ë¶€, í¼ì˜ ì…ë ¥ê°’

### ì „ì—­ ìƒíƒœ(Global State)

- **ì•± ì „ì²´**ì—ì„œ ê³µìœ í•˜ì—¬ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìƒíƒœ
- ì „ì—­ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ì»´í¬ë„ŒíŠ¸ ë“¤ì´ ì—…ë°ì´íŠ¸ ëœë‹¤.
- `Prop drilling`ì„ í•´ê²°í•˜ê³ ì ì§€ì—­ìƒíƒœë¥¼ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë“¤ ì‚¬ì´ì˜ ì „ì—­ ìƒíƒœë¡œ ê³µìœ í•  ìˆ˜ ìˆë‹¤.

> **ğŸ“š Prop Drilling**  
> propsìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì¤‘, **ë°ì´í„°ê°€ í•„ìš”í•˜ì§€ ì•Šì•„ë„** ìì‹ì»´í¬ë„ŒíŠ¸ì—ê²Œ ì „ë‹¬ì„ ìœ„í•´ Propsê°€ ì „ë‹¬ë˜ëŠ” ê³¼ì •  
> ì»´í¬ë„ŒíŠ¸ ìˆ˜ê°€ ë§ì•„ì§€ë©´ Prop drillingìœ¼ë¡œ ì¸í•´ ì½”ë“œê°€ í›¨ì”¬ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤.

### ì„œë²„ ìƒíƒœ (Server State)

- ì™¸ë¶€ ì„œë²„ì— ì €ì¥í•´ì•¼ í•˜ëŠ” ìƒíƒœ ì˜ˆ) ì‚¬ìš©ì ì •ë³´, ê¸€ ëª©ë¡
- UIì™€ ê²°í•©í•˜ì—¬ ê´€ë¦¬í•´ì•¼ í•œë‹¤. ì˜ˆ) ë¡œë”©ì—¬ë¶€, ì—ëŸ¬ìƒíƒœ
- ì§€ì—­, ì „ì—­ìƒíƒœì™€ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ ê´€ë¦¬ë˜ë©° react-query, SWRê³¼ ê°™ì€ ì™¸ë¶€ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤.

## 10.1.2 ìƒíƒœë¥¼ ì˜ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê°€ì´ë“œ

ìƒíƒœëŠ” ì•±ì˜ ë³µì¡ì„±ì„ ì¦ê°€ì‹œí‚¤ê³ , ë™ì‘ì„ ì˜ˆì¸¡í•˜ê¸° ì–´ë µê²Œí•œë‹¤. ë”°ë¼ì„œ ìœ ì§€ë³´ìˆ˜ì™€ ì„±ëŠ¥ê´€ì ì—ì„œ **ìƒíƒœì˜ ê°¯ìˆ˜ë¥¼ ìµœì†Œí™”**í•˜ì.  
ğŸ‘‰ ë°˜ë“œì‹œ í•„ìš”í•œ ìƒíƒœë§Œì„ ê´€ë¦¬í•´ì•¼ í•˜ë©°, ê°€ëŠ¥í•˜ë©´ `stateless` ì»´í¬ë„ŒíŠ¸ë¥¼ í™œìš©í•˜ì.

**'ìƒíƒœ'ë¡œ ê´€ë¦¬í•´ì•¼ í•˜ëŠ” ê¸°ì¤€ 2ê°€ì§€**

1. ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€í•˜ì§€ ì•Šìœ¼ë©´ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.
2. íŒŒìƒëœ ê°’ì€ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.

---

### ğŸ“ ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€í•˜ì§€ ì•Šìœ¼ë©´ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.

ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€í•˜ì§€ ì•ŠëŠ” ê°’ì—ëŠ” **ê°ì²´ ì°¸ì¡° ë™ì¼ì„±**ì„ ìœ ì§€í•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤í•´ë³´ì.

#### âŒ ìƒìˆ˜ë³€ìˆ˜ì— ì €ì¥í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

```typescript
import React from 'react';

const Component: React.VFC = () => {
const store = new Store();
return (
    <StoreProvider store={store}>
        <Children>
    </StoreProvider>
   )  ;
};
```

ëœë”ë§ ë ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ëœë‹¤. ë•Œë¬¸ì— Context, propsë¡œ ì „ë‹¬ì‹œ ë§¤ë²ˆ ë‹¤ë¥¸ ê°ì²´ë¡œ ì¸ì‹ë˜ì–´ ë¶ˆí•„ìš”í•œ ë¦¬ëœë”ë§ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ìš°ë¦¬ì˜ ëª©ì ì€ ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°ì—ì„œ ë§ˆìš´íŠ¸ ë ë•Œ ìƒì„±ë˜ê³  ëœë”ë§ ë˜ë”ë¼ë„ ê°ì²´ ì°¸ì¡° ë™ì¼ì„±ì´ ìœ ì§€ë˜ë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.

#### ë°©ë²•1. `useMemo`

```typescript
const store = useMemo(() => new Store(), []);
```

useMemoë¥¼ í™œìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œë§Œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , ì´í›„ ëœë”ë§ì—ì„œëŠ” ì´ì „ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¬í™œìš©í•  ìˆ˜ ìˆë‹¤.

âŒ ê°ì²´ ì°¸ì¡° ë™ì¼ì„± ë§Œì„ ìœ„í•œ useMemoì‚¬ìš©ì€ ì§€ì–‘í•˜ì.

- (ğŸ“šê³µì‹ë¬¸ì„œ) **useMemoë¥¼ í†µí•œ ë©”ëª¨ì´ì œì´ì…˜ì€ ì˜ë¯¸ìƒìœ¼ë¡œ ë³´ì¥ëœ ê²ƒì´ ì•„ë‹ˆë‹¤. ë•Œë¬¸ì— ì„±ëŠ¥í–¥ìƒì„ ìœ„í•œ ìš©ë„ë¡œ ì‚¬ìš©ë˜ì–´ì•¼ í•œë‹¤.**
- ë©”ëª¨ë¦¬ í™•ë³´ë¥¼ ìœ„í•´ ì´ì „ì— ë©”ëª¨ì´ì œì´ì…˜ëœ ë°ì´í„°ê°€ ì‚­ì œë  ìˆ˜ ìˆë‹¤.

ğŸ‘‰ useMemo ì—†ì´ë„ ë™ì‘í•˜ë„ë¡ ì‘ì„±í•˜ê³  ì„±ëŠ¥ ê°œì„ ì„ ìœ„í•´ useMemoë¥¼ "ì¶”ê°€"í•˜ì.

#### ë°©ë²•2. useStateì˜ ì´ˆê¹ƒê°’ë§Œ ì§€ì •í•˜ëŠ” ë°©ë²•

```typescript
useState(() => new Store());
```

Lazy initializationì„ ì‚¬ìš©í•˜ì—¬, ìµœì´ˆë¡œ ëœë”ë§ ë ë•Œì—ë§Œ ì½œë°±í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì´ˆê¹ƒê°’ì„ ìƒì„±í•œë‹¤.

ë‹¤ë§Œ,ìœ„ ë°©ì‹ì´ ì˜ ë™ì‘í•  ìˆ˜ ìˆì§€ë§Œ ë‹¤ì‹œ ìƒíƒœì˜ ì˜ë¯¸ë¥¼ ë˜ì§šì–´ ë³´ì•˜ì„ ë•Œ ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹ˆë‹¤. (ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€í•˜ì§€ ì•Šìœ¼ë©´ ìƒíƒœê°€ ì•„ë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆ Store ì¸ìŠ¤í„´ìŠ¤ëŠ” ì‚¬ì‹¤ ìƒíƒœê°€ ì•„ë‹Œë°, useStateìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì–´ìƒ‰í•˜ê²Œ ëŠê»´ì§„ë‹¤.)

#### ë°©ë²•3. `useRef` âœ…

```typescript
const store = useRef<Store>(null);

if (!store.current) {
  store.current = new Store();
}
```

- `useRef(new Store())`ì„ ì§€ì •í•  ê²½ìš° useStateê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ëœë”ë§ ë•Œë§ˆë‹¤ ë¶ˆí•„ìš”í•œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ë¯€ë¡œ ìœ„ì²˜ëŸ¼ ì‘ì„±í•´ì¤˜ì•¼ í•œë‹¤.
- useRefëŠ” ê¸°ìˆ ì ìœ¼ë¡œ `useState({children:initialValue})[0]`ê³¼ ë™ì¼í•˜ë‹¤.
- ë™ì¼í•œ ê°ì²´ ì°¸ì¡°ë¥¼ í• ë•ŒëŠ” useStateëŒ€ì‹  useRefë¥¼ í™œìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.

---

### ğŸ“íŒŒìƒëœ ê°’ì€ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.

**ë¶€ëª¨ì—ê²Œì„œ ì „ë‹¬ë°›ì€ ìˆ˜ ìˆëŠ” props, ê¸°ì¡´ ìƒíƒœì—ì„œ ê³„ì‚°ë  ìˆ˜ ìˆëŠ” ê°’ì€ ìƒíƒœê°€ ì•„ë‹ˆë‹¤**

> ğŸ“š **SSOT(Sing Source of Truth)** : ì–´ë– í•œ ë°ì´í„°ë„ ë‹¨ í•˜ë‚˜ì˜ ì¶œì²˜ì—ì„œ ìƒì„±ë˜ê³  ìˆ˜ì •ë˜ì–´ì•¼ í•œë‹¤.

íŒŒìƒëœ ê°’ì„ ìƒíƒœë¡œ ê´€ë¦¬í•˜ê²Œ ë˜ë©´, ê¸°ì¡´ ì¶œì²˜ì™€ ë‹¤ë¥¸ ê³³ì—ì„œ ê´€ë¦¬í•˜ê²Œ ë˜ë¯€ë¡œ **ì •í™•ì„±ê³¼ ì¼ê´€ì„±**ì„ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤.

### âœï¸ ì˜ˆì‹œ

```typescript
import React, { useState } from 'react';

type UserEmailProps = {
  initialEmail: string;
};

const UserEmail: React.VFC<UserEmailProps> = ({ initialEmail }) => {
  const [email, setEmail] = useState(initialEmail);
  const onChangeEmail = (event: React.ChangeEvent<HTMLInputElement>) => {
    setEmail(event.target.value);
  };

  return (
    <div>
      <input type="text" value={email} onChange={onChangeEmail} />
    </div>
  );
};
```

ë¬¸ì œ : initialEmailì˜ propì˜ ê°’ì´ ë³€ê²½ë˜ì–´ë„ input íƒœê·¸ì˜ valueëŠ” ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤.

ğŸ§ : "useEffectë¥¼ ì‚¬ìš©í•´ì„œ initialEmailì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ, ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•´ì£¼ëŠ” ë°©ë²•ì€ ì–´ë•Œ?"

```typescript
const [email, setEmail] = useState(initialEmail);

useEffect(() => {
  setEmail(initialEmail);
}, [initialEmail]);
```

- âŒ ì‚¬ìš©ìê°€ ê°’ì„ ë³€ê²½í•œ ë’¤, initialEmail Prop ì´ ë³€ê²½ë˜ë©´ ê¸°ì¡´ ì‚¬ìš©ìì˜ ì…ë ¥ì€ ë¬´ì‹œë˜ê³  ìƒˆë¡­ê²Œ ì „ë‹¬ëœ initialEmailì´ valueë¡œ ì„¤ì •ë˜ì–´ë²„ë¦°ë‹¤.
- âŒ **ë‚´ë¶€ ìƒíƒœ**ë¥¼ useEffectë¡œ ë™ê¸°í™” í•˜ëŠ” ë° ì‚¬ìš©í•˜ë©´ ê°œë°œìê°€ ì¶”ì í•˜ê¸° ì–´ë ¤ìš´ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— í”¼í•´ì•¼ í•œë‹¤.
- âœ… useEffectë¥¼ ì‚¬ìš©í•œ ë™ê¸°í™” ì‘ì—…ì€ LocalStorageì™€ ê°™ì€ **ì™¸ë¶€ë°ì´í„°**ì™€ ë™ê¸°í™” í• ë•Œë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- âœ… **ì‹±íƒœëŒì–´ì˜¬ë¦¬ê¸°(Lifting State up)**ë¡œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ì—¬ ë‹¨ì¼ ì¶œì²˜ì—ì„œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤.

```typescript
import React, { useState } from 'react';

type UserEmailProps = {
  email: string;
  setEmail: React.Dispatch<React.SetStateAction<string>>;
};

const UserEmail: React.VFC<UserEmailProps> = ({ email, setEmail }) => {
  const onChangeEmail = (event: React.ChangeEvent<HTMLInputElement>) => {
    setEmail(event.target.value);
  };
  return (
    <div>
      <input type="text" value={email} onChange={onChangeEmail} />
    </div>
  );
};
```

ìì‹ì¸ `UserEmail`ì—ì„œ ê´€ë¦¬í•˜ë˜ ìƒíƒœë¥¼ ë¶€ëª¨ë¡œ ì˜®ê²¨ì„œ Emailë°ì´í„°ì˜ ì¶œì²˜ë¥¼ í•˜ë‚˜ë¡œ í†µì¼ í•  ìˆ˜ ìˆë‹¤.

---

### ğŸ“ prop í˜¹ì€ ê¸°ì¡´ìƒíƒœì—ì„œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ” ê°’ì€ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.

### âœï¸ ì˜ˆì‹œ

```typescript
import {useState, useEffect} from 'react';

const [items, setItems] = useState<Item[]>([]); // ì „ì²´ ì•„ì´í…œ ëª©ë¡ì´ë¼ë©´
const [selectedItems, setSelectedItems] = useState<Item[]>([]); // isSelectedê°€ trueì´ ì•„ì´í…œ ëª©ë¡, ì¦‰ ittemsì˜ ë¶€ë¶„ì§‘í•©ì´ë‹¤.

useEffect(() => {
 setSelectedItems(items.filter((item) = > item.isSelected));
}, [items]);
```

useEffectë¥¼ ì‚¬ìš©í•´ì„œ itemsê°€ ë³€ê²°ë  ë•Œë§ˆë‹¤ ìƒˆë¡­ê²Œ selectedItemsë¥¼ ë™ê¸°í™”í•˜ë ¤ê³  í•œë‹¤.

**ë¬¸ì œ1.** itemsì™€ selctedItemsê°€ ë™ê¸°í™”ë˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤

- ê°„ë‹¨í•œ ë¡œì§ì˜ ê²½ìš° ë¬¸ì œì—†ì§€ë§Œ, ì—¬ëŸ¬ ìƒíƒœê°€ ë³µì¡í•˜ê²Œ ì–½íˆë©´ íë¦„íŒŒì•…ì´ ì–´ë µê³  ë™ê¸°í™” ê³¼ì •ì´ ëˆ„ë½ë  ìˆ˜ ìˆë‹¤.

**ë¬¸ì œ2.** setSelectedItemsë¡œ itemsì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ê°€ ì•„ë‹Œ ë°ì´í„°ë¥¼ selectedItemsì— í¬í•¨ì‹œí‚¤ëŠ”ê²ƒì´ êµ¬ì¡°ì ìœ¼ë¡œ ê°€ëŠ¥í•˜ë‹¤.

- ë‹¨ì¼ ì¶œì²˜ê°€ ì•„ë‹Œ ì—¬ëŸ¬ ì¶œì²˜ë¥¼ ê°€ì§€ê²Œ ëœë‹¤.

> ğŸ’« ë‚´ë¶€ ìƒíƒœë“¤ë¼ë¦¬ ë™ê¸°í™”í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì¶œì²˜ë¥¼ í•˜ë‚˜ë¡œ í•©ì¹˜ì.

í•´ê²°1. javascript ë³€ìˆ˜ë¡œ ê´€ë¦¬í•˜ê¸°

```typescript
import {useState} from 'react';

const [items, setItems] = useState<Item[]>([]);
const selectedItems = items.filter((item) = > item.isSelected); // itemsê°€ ë³€ê²½ë˜ì–´ ë¦¬ëœë”ë§ ë ë•Œë§ˆë‹¤ selectedItemsë„ ê°±ì‹ ëœë‹¤.
```

ì´ë ‡ê²Œ ë˜ë©´ ì•ì„œ useEffectë¥¼ ì‚¬ìš©í•œ ë°©ë²•ë³´ë‹¤ ì¢‹ì€ ëœë”ë§ ì„±ëŠ¥ì„ ê°€ì§ˆìˆ˜ ìˆë‹¤.
ë§Œì•½ ë¦¬ëœë”ë§ì‹œë§ˆë‹¤ ìƒˆë¡­ê²Œ selectedItemsë¥¼ ê³„ì‚°í•´ì•¼ í•´ì„œ ì„±ëŠ¥ ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ useMemoë¡œ ê°ì‹¸ ì„±ëŠ¥ì„ ê°œì„ í•  ìˆ˜ ìˆë‹¤.

```typescript
import { useState, useMemo } from 'react';

const [items, setItems] = useState<Item[]>([]);
const selectedItems = useMemo(() => veryExpensiveCalculation(items), [items]);
```

---

### ğŸ“ `useState` vs `useReducer` ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?

**useStateëŒ€ì‹  useReducerê°€ ê¶Œì¥ë˜ëŠ” ê²½ìš°**

- ë‹¤ìˆ˜ì˜ í•˜ìœ„ í•„ë“œë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ë³µì¡í•œ ìƒíƒœ ë¡œì§ì„ ë‹¤ë£°ë•Œ.
- ë‹¤ìŒ ìƒíƒœê°€ ì´ì „ìƒíƒœì— ì˜ì¡´ì ì¼ ë•Œ

### âœï¸ ì˜ˆì‹œ

ë¦¬ë·°ë¦¬ìŠ¤íŠ¸ë¥¼ í•„í„°ë§í•˜ì—¬ ë³´ì—¬ì£¼ëŠ” ì¿¼ë¦¬ë¥¼ ìƒíƒœë¡œ ì €ì¥í•œë‹¤.

```typescript
// ë‚ ì§œ ë²”ìœ„ ê¸°ì¤€ - ì˜¤ëŠ˜, 1ì£¼ì¼, 1ê°œì›”
type DateRangePreset = 'TODAY' | 'LAST_WEEK' | 'LAST_MONTH';
type ReviewRatingString = '1' | '2' | '3' | '4' | '5';
interface ReviewFilter {
  // ë¦¬ë·° ë‚ ì§œ í•„í„°ë§
  startDate: Date;
  endDate: Date;
  dateRangePreset: Nullable<DateRangePreset>;
  // í‚¤ì›Œë“œ í•„í„°ë§
  keywords: string[];
  // ë¦¬ë·° ì ìˆ˜ í•„í„°ë§
  ratings: ReviewRatingString[];
  // ... ì´ì™¸ ê¸°íƒ€ í•„í„°ë§ ì˜µì…˜
}
// Review List Query State
interface State {
  filter: ReviewFilter;
  page: string;
  size: number;
}
```

ì´ëŸ¬í•œ ë°ì´í„°êµ¬ì¡°ë¥¼ useStateë¡œ ë‹¤ë£¨ë©´ ì˜¤ë¥˜ê°€ëŠ¥ì„±ì´ ì¦ê°€í•œë‹¤.

- í˜ì´ì§€ ê°’ë§Œ ì—…ë°ì´íŠ¸ í•˜ê³  ì‹¶ì–´ë„ ì „ì²´ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì˜¨ë‹¤ìŒ í˜ì´ì§€ ê°’ì„ ë®ì–´ì“°ê²Œ ë˜ë¯€ë¡œ ë‹¤ë¥¸ í•„ë“œê°€ ìˆ˜ì •ë  ìˆ˜ ìˆë‹¤.
- <ì‚¬ì´ì¦ˆ í•„ë“œë¥¼ ì—…ë°ì´íŠ¸ í• ë•ŒëŠ” í˜ì´ì§€ í•„ë“œë¥¼ 0ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤>ì™€ ê°™ì€ ê·œì¹™ì´ ìˆë‹¤ë©´ useStateë§Œìœ¼ë¡œëŠ” ê°•ì œí•  ìˆ˜ ì—†ë‹¤.
  ì´ëŸ´ë•Œ useReducerë¥¼ ì‚¬ìš©í•´ë³´ì.

**useReducerë¥¼ ì‚¬ìš©í•œ ì˜ˆì‹œ**

ë¬´ì—‡ì„ / ì–´ë–»ê²Œ ë³€ê²½í• ì§€ ë¶„ë¦¬í•˜ì—¬ ì–´ë–¤ ì‘ì—…ì„ í• ì§€ ì•¡ì…˜ìœ¼ë¡œ ë„˜ê¸°ê³ , reducerí•¨ìˆ˜ ë‚´ì—ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  ë°©ì‹ì„ ì •ì˜  
-> ë³µì¡í•œ ìƒíƒœë¥¼ ìˆ¨ê¸°ê³  ì•ˆì •ì„±ì„ ë†“ì¼ ìˆ˜ ìˆë‹¤.

```typescript
import React, { useReducer } from 'react';

// Action ì •ì˜
type Action =
  | { payload: ReviewFilter; type: 'filter' }
  | { payload: number; type: 'navigate' }
  | { payload: number; type: 'resize' };
// Reducer ì •ì˜
const reducer: React.Reducer<State, Action> = (state, action) => {
  switch (action.type) {
    case 'filter':
      return {
        filter: action.payload,
        page: 0,
        size: state.size,
      };
    case 'navigate':
      return {
        filter: state.filter,
        page: action.payload,
        size: state.size,
      };
    case 'resize':
      return {
        filter: state.filter,
        page: 0,
        size: action.payload,
      };
    default:
      return state;
  }
};

// useReducer ì‚¬ìš©
const [state, dispatch] = useReducer(reducer, getDefaultState());
// dispatch ì˜ˆì‹œ
dispatch({ payload: filter, type: 'filter' });
dispatch({ payload: page, type: 'navigate' });
dispatch({ payload: size, type: 'resize' });
```

### âœï¸ ì˜ˆì‹œ2

í† ê¸€ ì•¡ì…˜ì²˜ëŸ¼ ì´ì „ ìƒíƒœì— ì˜ì¡´ì ìœ¼ë¡œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í• ë•Œ

```typescript
import { useReducer } from 'react';

//Before
const [fold, setFold] = useState(true);

const toggleFold = () => {
  setFold((prev) => !prev);
};

// After
const [fold, toggleFold] = useReducer((v) => !v, true);
```

## 10.1.3 ì „ì—­ìƒíƒœê´€ë¦¬ì™€ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

> ìƒíƒœëŠ” ì‚¬ìš©í•˜ëŠ” ê³³ê³¼ ìµœëŒ€í•œ ê°€ê¹Œì›Œì•¼ í•˜ë©° ì‚¬ìš©ë²”ìœ„ë¥¼ ì œí•œí•´ì•¼ í•œë‹¤.

ìƒíƒœë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ ì „ì—­ìƒíƒœë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì—ëŠ” ë‘ê°€ì§€ ìˆë‹¤.

1. `contextAPI` + `useState` ë˜ëŠ” `useReducer`
2. ì™¸ë¶€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ (Redux, MobX, Recoil ë“±)

### ğŸ“ `Context API`

ê¹Šì€ ë ˆë²¨ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” prop drilling ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë„êµ¬ë¡œ, ì»´í¬ë„ŒíŠ¸ë“¤ ì‚¬ì´ì— ë°ì´í„°ë¥¼ ì‰½ê²Œ ê³µìœ í•˜ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì œê³µë˜ëŠ” APIì´ë‹¤.

context APIëŠ” ì „ì—­ì ìœ¼ë¡œ ê³µìœ ë˜ëŠ” ë°ì´í„°ë¥¼ ì»¨í…ìŠ¤íŠ¸ë¡œ ì œê³µí•˜ê³ , ì»¨í…ìŠ¤íŠ¸ë¥¼ êµ¬ë…í•œ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆê²Œëœë‹¤.
ëŒ€í‘œì ì¸ ì „ì—­ì ìœ¼ë¡œ ê³µìœ ë˜ëŠ” ë°ì´í„°ì—ëŠ” 'UIí…Œë§ˆ ì •ë³´', 'ë¡œì¼€ì¼ ë°ì´í„°' ê°€ ìˆë‹¤.

### âœï¸ì˜ˆì‹œ

```typescript
// í˜„ì¬ êµ¬í˜„ëœ ê²ƒ - TabGroup ì»´í¬ë„ŒíŠ¸ë¿ ì•„ë‹ˆë¼ ëª¨ë“  Tab ì»´í¬ë„ŒíŠ¸ì—ë„ type propì„ ì „ë‹¬
<TabGroup type='sub'> // TabGroupì— typeí”„ë¡­ì „ë‹¬
  <Tab name='í… ë ˆì´ë¸” 1' type='sub'> // Tabì— typeí”„ë¡­ì „ë‹¬
   <div>123</div>
  </Tab>
  <Tab name='í… ë ˆì´ë¸” 2' type='sub'>
   <div>123</div>
  </Tab>
</TabGroup>

// ì›í•˜ëŠ” ê²ƒ - TabGroup ì»´í¬ë„ŒíŠ¸ì—ë§Œ typeí”„ë¡­ ì „ë‹¬
<TabGroup type='sub'>
  <Tab name='í… ë ˆì´ë¸” 1'>
   <div>123</div>
  </Tab>
  <Tab name='í… ë ˆì´ë¸” 2'>
   <div>123</div>
  </Tab>
</TabGroup>
```

TabGroup ì»´í¬ë„ŒíŠ¸ì—ë§Œ type í”„ë¡­ì„ ì „ë‹¬í•˜ê³  Tabì»´í¬ë„ŒíŠ¸ì˜ êµ¬í˜„ë‚´ì—ì„œë„ typeì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ë ¤ë©´,

- ìƒìœ„ ì»´í¬ë„ŒíŠ¸(TabGroup) êµ¬í˜„ë¶€ì— ì»¨í…ìŠ¤íŠ¸ í”„ë¡œë°”ì´ë” (Context Provider)ë¥¼ ë„£ì–´ëŠ”ë‹¤.
- í•˜ìœ„ ì»´í¬ë„ŒíŠ¸(Tab)ì—ì„œ ì»¨í…ìŠ¤íŠ¸ë¥¼ êµ¬ë…í•˜ì—¬ ë°ì´í„°ë¥¼ ì½ëŠ”ë‹¤.

```typescript
import { FC } from 'react';

const TabGroup: FC<TabGroupProps> = (props) => {
  const { type = 'tab', ...otherProps } = useTabGroupState(props);
  /* ... ë¡œì§ ìƒëµ */
  return (
    <TabGroupContext.Provider value={{ ...otherProps, type }}>
      {/* ... */}
    </TabGroupContext.Provider>
  );
};

const Tab: FC<TabProps> = ({ children, name }) => {
  const { type, ...otherProps } = useTabGroupContext();
  return <>{/* ... */}</>;
};
```

í˜¹ì€ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë¥¼ ì •ì˜í•´ì„œ ë” ê°„ë‹¨í•œ ì½”ë“œë¡œ ì»¨í…ìŠ¤íŠ¸ì™€ í›…ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
`createContext`í•¨ìˆ˜ì—ì„œ ìì£¼ ì‚¬ìš©ëœëŠ” í”„ë¡œë°”ì´ë”ì™€ í•´ë‹¹ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” í›…ì„ ê°„í¸í•˜ê²Œ ìƒì„±í•˜ì—¬ ìƒì‚°ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

```typescript
import React from 'react';

type Consumer<C> = () => C;

export interface ContextInterface<S> {
  state: S;
}

export function createContext<S, C = ContextInterface<S>>(): readonly [
  React.FC<C>,
  Consumer<C>,
] {
  const context = React.createContext<Nullable<C>>(null);

  const Provider: React.FC<C> = ({ children, ...otherProps }) => {
    return (
      <context.Provider value={otherProps as C}>{children}</context.Provider>
    );
  };

  const useContext: Consumer<C> = () => {
    const _context = React.useContext(context);
    if (!_context) {
      throw new Error(ErrorMessage.NOT_FOUND_CONTEXT);
    }
    return _context;
  };

  return [Provider, useContext];
}

// Example
interface StateInterface {}
const [context, useContext] = createContext<StateInterface>();
```

<br />

contextAPIëŠ” ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì†”ë£¨ì…˜ì´ê¸° ë³´ë‹¤ ì»´í¬ë„ŒíŠ¸ê°„ì˜ ê°’ì„ ê³µìœ í•˜ê¸° ìœ„í•œ ì†”ë£¨ì…˜ì´ë‹¤.
í•˜ì§€ë§Œ useState, useReducerì™€ ê°™ì´ ì§€ì—­ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ APIì™€ ê²°í•©í•˜ì—¬ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë“¤ ì‚¬ì´ì—ì„œ ìƒíƒœë¥¼ ê³µìœ í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©ë˜ê¸°ë„ í•œë‹¤.

```typescript
import { useReducer } from 'react';

function App() {
  const [state, dispatch] = useReducer(reducer, initialState);
  return (
    <StateProvider.Provider value={{ state, dispatch }}>
      <ComponentA />
      <ComponentB />
    </StateProvider.Provider>
  );
}
```

ìœ„ì²˜ëŸ¼ ì •ì˜í•˜ë©´ ì»¨í…ìŠ¤íŠ¸ë¥¼ êµ¬ë…í•˜ëŠ” ì•±ì—ì„œ ì •ì˜ëœ ìƒíƒœë¥¼ ì½ê³  ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤.

## 10.2 ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ íŠ¹ì§•ê³¼ ìƒí™©ì— ë”°ë¼ ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ íƒí•˜ë©´ ì¢‹ì„ì§€ ì•Œì•„ë³¸ë‹¤.

### 10.2.1 MobX

- ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ê³¼ ë°˜ì‘í˜• í”„ë¡œê·¸ë˜ë° íŒ¨ëŸ¬ë‹¤ì„ì˜ ì˜í–¥ì„ ë°›ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬.
- ì¥ì  : MobXì—ì„œëŠ” ìƒíƒœë³€ê²½ë¡œì§ì„ ë‹¨ìˆœí•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆê³ , ë³µì¡í•œ ì—…ë°ì´íŠ¸ ë¡œì§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ìœ„ì„í•  ìˆ˜ ìˆë‹¤.
- ë‹¨ì  : ë°ì´í„°ê°€ ì–¸ì œ, ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ ì¶”ì ì´ ì–´ë µê¸° ë•Œë¬¸ì— íŠ¸ëŸ¬ë¸”ìŠˆíŒ…ì— ì–´ë ¤ì›€ì„ ê²ªì„ ìˆ˜ ìˆë‹¤.

```typescript
import { observer } from 'mobx-react-lite';
import { makeAutoObservable } from 'mobx';

class Cart {
  itemAmount = 0;

  constructor() {
    makeAutoObservable(this);
  }

  increase() {
    this.itemAmount += 1;
  }

  reset() {
    this.itemAmount = 0;
  }
}

const myCart = new Cart();
const CartView = observer(({ cart }) => (
  <button onClick={() => cart.reset()}>
    amount of cart items: {cart.itemAmount}
  </button>
));

ReactDOM.render(<CartView cart={myCart} />, document.body);
```

### 10.2.2 Redux

- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ì˜í–¥ì„ ë°›ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ì¥ì 
  - íŠ¹ì • UI í”„ë ˆì„ì›Œí¬ì— ì¢…ì†ë˜ì§€ ì•Šì•„ ë…ë¦½ì ìœ¼ë¡œ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
  - ì˜¤ëœ ì‹œê°„ ì‚¬ìš©ë˜ì–´ ì™€ì„œ ë‹¤ì–‘í•œ ìš”êµ¬ì‚¬í•­ì— ì¶©ë¶„íˆ ê²€ì¦ì´ ë¨
  - ìƒíƒœ ë³€ê²½ ì¶”ì ì— ìµœì í™”ë˜ì–´ìˆì–´ì„œ íŠ¹ì • ìƒí™©ì—ì„œ ë°œìƒí•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¬¸ì œì˜ ì›ì¸ì„ íŒŒì•…í•  ë•Œ ìš©ì´í•˜ë‹¤.
- ë‹¨ì 
  - ë‹¨ìˆœí•œ ìƒíƒœì„¤ì •ì— ë§ì€ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ê°€ í•„ìš”í•¨
  - ì‚¬ìš©ë‚œì´ë„ê°€ ë†’ë‹¤.

```typescript
import { createStore } from 'redux';

function counter(state = 0, action) {
  switch (action.type) {
    case 'PLUS':
      return state + 1;
    case 'MINUS':
      return state - 1;
    default:
      return state;
  }
}

let store = createStore(counter);

store.subscribe(() => console.log(store.getState()));

store.dispatch({ type: 'PLUS' });
// 1
store.dispatch({ type: 'PLUS' });
// 2
store.dispatch({ type: 'MINUS' });
// 1
```

### 10.2.3 Recoil

ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” `Atom`ê³¼ í•´ë‹¹ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ìˆœìˆ˜í•¨ìˆ˜ `selector`ë¥¼ í†µí•´ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬

- ì¥ì 
  - Reduxì— ë¹„í•´ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ê°€ ì ê³ , ë‚œì´ë„ê°€ ì‰¬ì›Œ ë°°ìš°ê¸° ì‰½ë‹¤.
- ë‹¨ì 
  - ì•„ì§ ì‹¤í—˜ì ì¸ ìƒíƒœì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë‹¤ì–‘í•œ ìš”êµ¬ì‚¬í•­ì— ëŒ€í•´ ì¶©ë¶„í•œ ê²€ì¦ì´ ì´ë£¨ì–´ì§€ì§€ ì•Šì•˜ë‹¤.

```typescript
import React from 'react';
import { RecoilRoot } from 'recoil';
import { TextInput } from './';

function App() {
  return (
    <RecoilRoot>
    // ì—¬ê¸°ì— ìƒíƒœë¥¼ ê³µìœ í•  ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìœ„ì¹˜í•´ì•¼ í•œë‹¤.
      <TextInput />
    </RecoilRoot>
  );
}

...


import { atom } from 'recoil';

// Atom ìƒì„±
export const textState = atom({
  key: 'textState', // unique ID (with respect to other atoms/selectors)
  default: '', // default value (aka initial value)
});


// TextInputì´ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ textStateë¼ëŠ” Atom ì‚¬ìš©
import { useRecoilState } from 'recoil';
import { textState } from './';

export function TextInput() {
  const [text, setText] = useRecoilState(textState);
  const onChange = (event) => {
    setText(event.target.value);
  };
  return (
    <div>
      <input type='text' value= {text} onChange= {onChange} />
      <br />
      Echo: {text}
    </div>
  );
}

setInterval(() => {
  myCart.increase();
}, 1000);
```

Atomì€ ìƒíƒœì˜ ì¼ë¶€ë¥¼ ë‚˜íƒ€ë‚´ë©° ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì—ì„œë“ ì§€ ì½ê³  ì“¸ ìˆ˜ ìˆë„ë¡ ì œê³µëœë‹¤.

### 10.2.4 Zustand

- FluxíŒ¨í„´ì„ ì‚¬ìš©í•˜ë©° ë§ì€ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ë¥¼ ê°€ì§€ì§€ ì•Šì€ í›…ê¸°ë°˜ì˜ í¸ë¦¬í•œ API ëª¨ë“ˆì„ ì œê³µí•œë‹¤.
- í´ë¡œì €ë¥¼ í™œìš©í•˜ì—¬ ìŠ¤í† ì–´ë‚´ë¶€ìƒíƒœë¥¼ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ íŠ¹ì •ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ”ë‹¤.
- ìƒíƒœì™€ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ì•¡ì…˜ì„ ì •ì˜í•˜ê³  ë°˜í™˜ëœ í›…ì„ ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œë‚˜ ì„í¬íŠ¸í•˜ì—¬ ì›í•˜ëŠ”ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```typescript
import { create } from 'zustand';

const useBearStore = create((set) => ({
  bears: 0,
  increasePopulation: () => set((state) => ({ bears: state.bears + 1 })),
  removeAllBears: () => set({ bears: 0 }),
}));

function BearCounter() {
  const bears = useBearStore((state) => state.bears);

  return <h1>{bears} around here ...</h1>;
}

function Controls() {
  const increasePopulation = useBearStore((state) => state.increasePopulation);
  return <button onClick={increasePopulation}>Plus</button>;
}
```
