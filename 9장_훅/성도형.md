# 9ì¥ ìˆ˜ì •

Course: ts

# 9.1 ë¦¬ì•¡íŠ¸ í›… (React Hooks)

### ë“±ì¥ë°°ê²½

ë¦¬ì•¡íŠ¸ 16.8 ë²„ì „ ì´ì „ì—ëŠ” **í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸**ì—ì„œë§Œ ìƒíƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì—ˆë‹¤.
í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” `componentDidMount`, `componentDidUpdate` ì™€ ê°™ì€ ìƒëª…ì£¼ê¸° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœ ì—…ë°ì´íŠ¸ì— ë”°ë¥¸ ë¡œì§ì„ ì‹¤í–‰í–ˆë‹¤.

í•˜ì§€ë§Œ í”„ë¡œì íŠ¸ ê·œëª¨ê°€ ì»¤ì§€ë©´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì ì´ ë°œìƒí–ˆë‹¤:

- **ë¹„ìŠ·í•œ ë¡œì§ì„ ê°€ì§„ ìƒíƒœ ì—…ë°ì´íŠ¸ ë° ì‚¬ì´ë“œ ì´í™íŠ¸ ì²˜ë¦¬ê°€ ë¶ˆí¸í•¨**
- **ê´€ì‹¬ì‚¬ê°€ ë’¤ì„ì„ â†’ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€**
- **ë””ë²„ê¹… ë° í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ì›€**

### í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ì˜ˆì‹œ

```jsx
componentDidMount() {
  this.props.updateCurrentPage(routeName);
  this.didFocusSubscription = this.props.navigation.addListener('focus', () => {
    // í™”ë©´ì´ í¬ì»¤ìŠ¤ë¥¼ ë°›ì„ ë•Œ ì‹¤í–‰
  });
  this.didBlurSubscription = this.props.navigation.addListener('blur', () => {
    // í™”ë©´ì´ í¬ì»¤ìŠ¤ë¥¼ ìƒì„ ë•Œ ì‹¤í–‰
  });
}

componentWillUnmount() {
  if (this.didFocusSubscription != null) {
    this.didFocusSubscription();
  }
  if (this.didBlurSubscription != null) {
    this.didBlurSubscription();
  }
  if (this.screenCloseTimer != null) {
    clearTimeout(this.screenCloseTimer);
    this.screenCloseTimer = null;
  }
}

componentDidUpdate(prevProps) {
  if (this.props.currentPage !== routeName) return;
  if (this.props.errorResponse !== prevProps.errorResponse) {
    // ì—ëŸ¬ ì‘ë‹µ ì²˜ë¦¬
  } else if (this.props.logoutResponse !== prevProps.logoutResponse) {
    // ë¡œê·¸ì•„ì›ƒ ì‘ë‹µ ì²˜ë¦¬
  } else if (this.props.navigateByType !== prevProps.navigateByType) {
    // ë„¤ë¹„ê²Œì´ì…˜ íƒ€ì… ë³€ê²½ ì²˜ë¦¬
  }
}

```

ìœ„ ì½”ë“œì—ì„œëŠ” `componentDidMount`, `componentDidUpdate`, `componentWillUnmount`ì—ì„œ ì—¬ëŸ¬ ê°€ì§€ ë¡œì§ì´ ì„ì—¬ ìˆì–´ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µë‹¤.

íŠ¹íˆ `componentWillUnmount`ì—ì„œëŠ” `componentDidMount`ì—ì„œ ì •ì˜í•œ ì—¬ëŸ¬ ê°œì˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì™€ íƒ€ì´ë¨¸ë¥¼ ì •ë¦¬í•´ì•¼ í•˜ëŠ”ë°, í•˜ë‚˜ë¼ë„ ë¹ ì§ˆ ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ë˜í•œ `componentDidUpdate`ì—ì„œ íŠ¹ì • `props` ë³€ê²½ ì‚¬í•­ì„ ì°¾ì•„ì•¼ í•˜ëŠ”ë°, ì—¬ëŸ¬ ì¡°ê±´ì´ ê²¹ì¹˜ë©´ ë””ë²„ê¹…ì´ ì–´ë ¤ì›Œì§„ë‹¤.

### ë¦¬ì•¡íŠ¸ í›…ì˜ ì¥ì 

ë¦¬ì•¡íŠ¸ í›…ì´ ë„ì…ë˜ë©´ì„œ **í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œë„ ìƒíƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê²Œ ë˜ì—ˆìœ¼ë©°**, í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì™€ ê°™ì´ ìƒëª…ì£¼ê¸°ì— ë§ì¶° ë¡œì§ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.

- **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ì¬ì‚¬ìš© ê°€ëŠ¥ â†’ `ì»¤ìŠ¤í…€ í›…`ìœ¼ë¡œ ë¶„ë¦¬ ê°€ëŠ¥**
- **ì½”ë“œë¥¼ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„í• í•˜ì—¬ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥**
- **ê´€ì‹¬ì‚¬ì— ë§ê²Œ ì‚¬ì´ë“œ ì´í™íŠ¸ì™€ ìƒíƒœë¥¼ ë¶„ë¦¬ ê°€ëŠ¥**

### í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œì˜ ì˜ˆì‹œ

```jsx
import { useEffect, useState } from 'react';

function MyComponent({ routeName, navigation }) {
  const [currentPage, setCurrentPage] = useState(routeName);

  useEffect(() => {
    const focusSubscription = navigation.addListener('focus', () => {
      // í™”ë©´ì´ í¬ì»¤ìŠ¤ë¥¼ ë°›ì„ ë•Œ ì‹¤í–‰
    });
    const blurSubscription = navigation.addListener('blur', () => {
      // í™”ë©´ì´ í¬ì»¤ìŠ¤ë¥¼ ìƒì„ ë•Œ ì‹¤í–‰
    });

    return () => {
      focusSubscription();
      blurSubscription();
    };
  }, [navigation]);

  useEffect(() => {
    setCurrentPage(routeName);
  }, [routeName]);

  return <div>{currentPage}</div>;
}

```

ì´ë ‡ê²Œ **`useEffect`** ë¥¼ ì‚¬ìš©í•˜ë©´ ìƒëª…ì£¼ê¸° ë©”ì„œë“œì˜ ì—­í• ì„ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.

---

### 9.1.1 useState

ë¦¬ì•¡íŠ¸ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `useState` í›…ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.

`useState`ì˜ íƒ€ì… ì •ì˜ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤:

```tsx
function useState<S>(
  initialState: S | (() => S)
): [S, Dispatch<SetStateAction<S>>];

type Dispatch<A> = (value: A) => void;
type SetStateAction<S> = S | ((prevState: S) => S);

```

### `useState`ê°€ ë°˜í™˜í•˜ëŠ” ê°’ ë¶„ì„

`useState`ëŠ” **íŠœí”Œ(tuple)** ì„ ë°˜í™˜í•œë‹¤.

- **ì²« ë²ˆì§¸ ìš”ì†Œ**: í˜„ì¬ ìƒíƒœ ê°’ (`S` íƒ€ì…)
- **ë‘ ë²ˆì§¸ ìš”ì†Œ**: ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” `Dispatch` í•¨ìˆ˜

`Dispatch` í•¨ìˆ˜ëŠ” `SetStateAction<S>` íƒ€ì…ì„ ê°€ì§€ë©°, `S` ë˜ëŠ” ì´ì „ ìƒíƒœë¥¼ ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” **ì—…ë°ì´íŠ¸ í•¨ìˆ˜**ë¥¼ ì¸ìë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.

ì´ë¥¼ í™œìš©í•˜ë©´ **ë¹„ë™ê¸°ì ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ë³´ë‹¤ ì•ˆì •ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.**

---

### `useState`ì˜ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì ìš© ì˜ˆì œ

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì ìš©í•˜ë©´ `useState`ì˜ í™œìš©ë„ë¥¼ ê·¹ëŒ€í™”í•  ìˆ˜ ìˆë‹¤.

ë‹¤ìŒ ì˜ˆì œë¥¼ ì‚´í´ë³´ì:

```tsx
import { useState } from "react";

const MemberList = () => {
  const [memberList, setMemberList] = useState([
    { name: "KingBaedal", age: 10 },
    { name: "MayBaedal", age: 9 }
  ]);

  // sumAge ê³„ì‚°
  const sumAge = memberList.reduce((sum, member) => sum + member.age, 0);

  // ìƒˆë¡œìš´ ë©¤ë²„ ì¶”ê°€
  const addMember = () => {
    setMemberList([
      ...memberList,
      {
        name: "DokgoBaedal",
        agee: 11, // ì˜¤íƒ€! `agee`ê°€ ì•„ë‹ˆë¼ `age`ì—¬ì•¼ í•¨
      }
    ]);
  };
};

```

### ì˜ˆìƒì¹˜ ëª»í•œ ë²„ê·¸ ë°œìƒ

ìœ„ ì½”ë“œì—ì„œ `addMember` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ `sumAge` ê°’ì´ `NaN`ì´ ëœë‹¤.

ì´ìœ ëŠ” `memberList` ë°°ì—´ì— ìƒˆë¡œìš´ ê°ì²´ë¥¼ ì¶”ê°€í•  ë•Œ, **ê¸°ì¡´ ë©¤ë²„ ê°ì²´ì—ëŠ” ì—†ëŠ” `agee` ì†ì„±ì´ ì¶”ê°€ë˜ì—ˆê¸° ë•Œë¬¸**ì´ë‹¤.

ì´ì²˜ëŸ¼ íƒ€ì…ì´ ì •í™•í•˜ì§€ ì•Šìœ¼ë©´, ì˜ˆìƒì¹˜ ëª»í•œ **ì‚¬ì´ë“œ ì´í™íŠ¸(side effect)** ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

íŠ¹íˆ, ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  ë•Œ íƒ€ì…ì´ ì˜¬ë°”ë¥´ê²Œ ì§€ì •ë˜ì§€ ì•Šìœ¼ë©´, **ë²„ê·¸ë¥¼ ì°¾ê¸° ì–´ë ¤ìš´ ë¬¸ì œ**ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

---

### íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•œ `useState` ê°œì„ 

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì ìš©í•˜ë©´ ì´ëŸ¬í•œ **íƒ€ì… ì˜¤ë¥˜ë¥¼ ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ë¯¸ë¦¬ ë°©ì§€**í•  ìˆ˜ ìˆë‹¤.

```tsx
import { useState } from "react";

interface Member {
  name: string;
  age: number;
}

const MemberList = () => {
  // useStateì˜ ì´ˆê¸°ê°’ì„ ë¹ˆ ë°°ì—´ë¡œ ì„¤ì •
  const [memberList, setMemberList] = useState<Member[]>([]);

  // sumAge ê³„ì‚° (íƒ€ì… ë³´ì¥ë¨)
  const sumAge = memberList.reduce((sum, member) => sum + member.age, 0);

  // ìƒˆë¡œìš´ ë©¤ë²„ ì¶”ê°€ í•¨ìˆ˜
  const addMember = () => {
    setMemberList([
      ...memberList,
      {
        name: "DokgoBaedal",
        agee: 11, // íƒ€ì… ì—ëŸ¬ ë°œìƒ! "age" ì†ì„±ì´ ìˆì–´ì•¼ í•¨
      }
    ]);
  };
};

```

### ì»´íŒŒì¼ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ ê°ì§€

```
Error: Type '{ name: string; agee: number; }'
is not assignable to type 'Member'.
Object literal may only specify known properties,
and 'agee' does not exist in type 'Member'.

```

ìœ„ì™€ ê°™ì€ **ì»´íŒŒì¼ ì˜¤ë¥˜**ê°€ ë°œìƒí•˜ë¯€ë¡œ,

ì˜ëª»ëœ ì†ì„±(`agee`)ì„ ì‚¬ìš©í•œ ê²ƒì„ ë¯¸ë¦¬ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.

---

### 9.1.2 ì˜ì¡´ì„± ë°°ì—´ì„ ì‚¬ìš©í•˜ëŠ” í›…: `useEffect`ì™€ `useLayoutEffect`

React í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ `useEffect`ì™€ `useLayoutEffect` í›…ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

---

## `useEffect`

`useEffect`ì˜ íƒ€ì… ì •ì˜ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```
function useEffect(effect: EffectCallback, deps?: DependencyList): void;
type DependencyList = ReadonlyArray<any>;
type EffectCallback = () => void | Destructor;
```

- ì²« ë²ˆì§¸ ì¸ìì¸ `EffectCallback`ì€ ë°˜í™˜ê°’ì´ ì—†ëŠ” í•¨ìˆ˜ì´ê±°ë‚˜, `Destructor`(í´ë¦°ì—… í•¨ìˆ˜)ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
- `Promise` íƒ€ì…ì„ ë°˜í™˜í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ `useEffect`ì˜ ì½œë°± í•¨ìˆ˜ì—ëŠ” `async` í•¨ìˆ˜ë¥¼ ì§ì ‘ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

### ë¹„ë™ê¸° í•¨ìˆ˜ ì‚¬ìš© ì‹œ ì£¼ì˜ì : **ê²½ìŸ ìƒíƒœ(Race Condition)**

`useEffect`ì—ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ë©´ **ê²½ìŸ ìƒíƒœ**(Race Condition)ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ì´ëŠ” ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ  ìì›ì— ì ‘ê·¼í•˜ë©´ì„œ ì‹¤í–‰ ìˆœì„œë‚˜ íƒ€ì´ë°ì„ ì˜ˆì¸¡í•  ìˆ˜ ì—†ê²Œ ë˜ëŠ” ë¬¸ì œì´ë‹¤.

---

## `useEffect`ì˜ `deps`(ì˜ì¡´ì„± ë°°ì—´)

`deps` ë°°ì—´ì€ `useEffect`ê°€ ì‹¤í–‰ë  ì¡°ê±´ì„ ì •ì˜í•œë‹¤. ë°°ì—´ì˜ ê°’ì´ ë³€ê²½ë  ë•Œ `useEffect`ê°€ ì‹¤í–‰ëœë‹¤.

í•˜ì§€ë§Œ **ê°ì²´ë‚˜ ë°°ì—´ì„ ì§ì ‘ `deps`ì— ë„£ì„ ê²½ìš°** ì£¼ì˜í•´ì•¼ í•œë‹¤. `useEffect`ëŠ” **ì–•ì€ ë¹„êµ(Shallow Compare)** ë§Œ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì—, ê°ì²´ì˜ ì‹¤ì œ ê°’ì´ ë³€í•˜ì§€ ì•Šì•˜ë”ë¼ë„ ì°¸ì¡° ê°’ì´ ë³€ê²½ë˜ë©´ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

### âŒ ì˜ëª»ëœ ì˜ˆì‹œ

```tsx
type SomeObject = {
  name: string;
  id: string;
};

interface LabelProps {
  value: SomeObject;
}

const Label: React.FC<LabelProps> = ({ value }) => {
  useEffect(() => {
    // value.nameê³¼ value.idë¥¼ ì‚¬ìš©í•´ì„œ ì‘ì—…í•œë‹¤
  }, [value]);  // âš ï¸ ê°ì²´ ìì²´ë¥¼ depsì— ì‚¬ìš© (ë¬¸ì œ ë°œìƒ ê°€ëŠ¥)

  return <div>{value.name}</div>;
};

```

### âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ

```tsx
const { id, name } = value;
useEffect(() => {
  // ê°ì²´ì˜ ê°œë³„ ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ê´€ë¦¬
}, [id, name]);

```

â†’ `id`, `name`ì„ ì§ì ‘ `deps`ì— ë„£ìŒìœ¼ë¡œì¨ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

---

## `useEffect`ì˜ í´ë¦°ì—…(Cleanup) í•¨ìˆ˜

`useEffect`ëŠ” `Destructor`(í´ë¦°ì—… í•¨ìˆ˜)ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ **ë§ˆìš´íŠ¸ í•´ì œë  ë•Œ ì‹¤í–‰**ëœë‹¤.

- `deps`ê°€ ë¹ˆ ë°°ì—´(`[]`)ì´ë©´ ì»´í¬ë„ŒíŠ¸ê°€ **ì²˜ìŒ ë Œë”ë§ë  ë•Œë§Œ ì‹¤í–‰**ë˜ê³ ,
ì´ë•Œì˜ í´ë¦°ì—… í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ **ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì‹¤í–‰**ëœë‹¤.
- `deps` ë°°ì—´ì´ ì¡´ì¬í•˜ë©´, ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ `useEffect`ê°€ ì‹¤í–‰ë˜ë©° **ì´ì „ `useEffect`ì˜ í´ë¦°ì—… í•¨ìˆ˜ë„ ì‹¤í–‰**ëœë‹¤.

---

## `useLayoutEffect`

`useLayoutEffect`ì˜ íƒ€ì… ì •ì˜ëŠ” `useEffect`ì™€ ë™ì¼í•˜ë‹¤.

```
function useLayoutEffect(effect: EffectCallback, deps?: DependencyList): void;

```

### ğŸ“Œ `useEffect` vs `useLayoutEffect`

| í›… | ì‹¤í–‰ ì‹œì  |
| --- | --- |
| `useEffect` | **ë Œë”ë§ í›„** í™”ë©´ì´ ì—…ë°ì´íŠ¸ëœ ì´í›„ ì‹¤í–‰ |
| `useLayoutEffect` | **ë Œë”ë§ ì§í›„** í™”ë©´ì´ ì—…ë°ì´íŠ¸ë˜ê¸° ì „ì— ì‹¤í–‰ |

`useEffect`ëŠ” ë Œë”ë§ì´ ëë‚œ í›„ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—, ìƒíƒœ ê°’ì´ ë³€ê²½ë˜ê¸° ì „ **ê¹œë¹¡ì´ëŠ” í˜„ìƒ(Flickering)** ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

ì´ë¥¼ ë°©ì§€í•˜ë ¤ë©´ `useLayoutEffect`ë¥¼ ì‚¬ìš©í•œë‹¤.

### ì˜ˆì œ: `useEffect` vs `useLayoutEffect`

```tsx
const [name, setName] = useState("");

// setNameì´ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦°ë‹¤ê³  ê°€ì •
useEffect(() => {
  setName("ë°°ë‹¬ì´");
}, []);

return <div>ì•ˆë…•í•˜ì„¸ìš”, {name}ë‹˜!</div>;
```

- ì²˜ìŒì—ëŠ” `"ì•ˆë…•í•˜ì„¸ìš”, ë‹˜!"`ì´ í‘œì‹œë˜ê³ , ì´í›„ `"ì•ˆë…•í•˜ì„¸ìš”, ë°°ë‹¬ì´ë‹˜!"`ìœ¼ë¡œ ë³€ê²½ëœë‹¤.
- ë§Œì•½ `setName`ì´ ì‹¤í–‰ë˜ê¸°ê¹Œì§€ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦°ë‹¤ë©´, ì‚¬ìš©ìëŠ” ë¹ˆ ê°’(`""`)ì„ ë³´ê²Œ ëœë‹¤.

```tsx
useLayoutEffect(() => {
  setName("ë°°ë‹¬ì´");
}, []);

```

- **í™”ë©´ì´ ì—…ë°ì´íŠ¸ë˜ê¸° ì „** `name`ì´ ì„¤ì •ë˜ë¯€ë¡œ, `"ì•ˆë…•í•˜ì„¸ìš”, ë°°ë‹¬ì´ë‹˜!"`ì´ ë°”ë¡œ í‘œì‹œëœë‹¤.

---

## `useMemo`ì™€ `useCallback`

`useMemo`ì™€ `useCallback`ì€ **ë Œë”ë§ ì„±ëŠ¥ ìµœì í™”**ë¥¼ ìœ„í•´ ì‚¬ìš©ëœë‹¤.

### `useMemo`

`useMemo`ëŠ” ê°’ì˜ ê³„ì‚° ê²°ê³¼ë¥¼ **ë©”ëª¨ì´ì œì´ì…˜(Memoization)** í•˜ì—¬ **ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ë°©ì§€**í•œë‹¤.

```tsx
function useMemo<T>(factory: () => T, deps: DependencyList | undefined): T;
```

### `useCallback`

`useCallback`ì€ **í•¨ìˆ˜ë¥¼ ë©”ëª¨ì´ì œì´ì…˜**í•˜ì—¬, ë™ì¼í•œ í•¨ìˆ˜ ê°ì²´ê°€ ë§¤ë²ˆ ìƒˆë¡œ ìƒì„±ë˜ì§€ ì•Šë„ë¡ í•œë‹¤.

```tsx
function useCallback<T extends (...args: any[]) => any>(callback: T, deps: DependencyList): T;
```

### ğŸ“Œ ì£¼ì˜í•  ì 

- `deps` ë°°ì—´ì„ ì„¤ì •í•˜ë©´, í•´ë‹¹ ê°’ì´ ë³€ê²½ë  ë•Œë§Œ ë‹¤ì‹œ ê³„ì‚°ëœë‹¤.
- `useEffect`ì™€ ë§ˆì°¬ê°€ì§€ë¡œ, ê°ì²´ë‚˜ ë°°ì—´ì„ `deps`ì— ì§ì ‘ ë„£ìœ¼ë©´ **ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚°ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.**
- ëª¨ë“  ê°’ê³¼ í•¨ìˆ˜ë¥¼ `useMemo`ì™€ `useCallback`ìœ¼ë¡œ ê°ì‹¸ë©´ ì„±ëŠ¥ í–¥ìƒì´ ë³´ì¥ë˜ì§€ ì•Šìœ¼ë©°, ì˜¤íˆë ¤ ì½”ë“œ ë³µì¡ë„ë§Œ ì¦ê°€í•  ìˆ˜ ìˆë‹¤.

---

## ë©”ëª¨ì´ì œì´ì…˜(Memoization)ì´ë€?

> ì´ì „ì— ê³„ì‚°í•œ ê°’ì„ ì €ì¥í•˜ì—¬ ë™ì¼í•œ ì…ë ¥ì— ëŒ€í•œ ì—°ì‚°ì„ ë‹¤ì‹œ ìˆ˜í–‰í•˜ì§€ ì•Šë„ë¡ ìµœì í™”í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.
> 

### âŒ `useMemo` ì—†ì´ ë§¤ë²ˆ ì—°ì‚°í•˜ëŠ” ê²½ìš°

```tsx
const heavyCalculation = (num: number) => {
  console.log("ë¬´ê±°ìš´ ì—°ì‚° ìˆ˜í–‰ ì¤‘...");
  return num * 2;
};

const MyComponent = ({ value }: { value: number }) => {
  const result = heavyCalculation(value); // ë§¤ë²ˆ ì—°ì‚° ìˆ˜í–‰

  return <div>ê²°ê³¼: {result}</div>;
};

```

### âœ… `useMemo`ë¥¼ ì‚¬ìš©í•œ ìµœì í™”

```tsx
const result = useMemo(() => heavyCalculation(value), [value]);
```

â†’ `value`ê°€ ë³€ê²½ë˜ì§€ ì•ŠëŠ” í•œ, `heavyCalculation`ì´ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

---

## **9.1.3** `useRef`ë¥¼ í™œìš©í•œ DOM ì¡°ì‘

ë‹¤ìŒ ì˜ˆì‹œëŠ” **ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ `ref`ì— ì €ì¥ëœ `<input />` ìš”ì†Œì— í¬ì»¤ìŠ¤ë¥¼ ì„¤ì •**í•˜ëŠ” ì½”ë“œì´ë‹¤.

```tsx
import { useRef } from "react";

const MyComponent = () => {
  const ref = useRef<HTMLInputElement>(null);

  const onClick = () => {
    ref.current?.focus();
  };

  return (
    <>
      <button onClick={onClick}>refì— í¬ì»¤ìŠ¤!</button>
      <input ref={ref} />
    </>
  );
};

export default MyComponent;

```

---

## `useRef`ì˜ íƒ€ì… ì •ì˜

`useRef`ëŠ” **ì´ˆê¸° ì¸ì ê°’ì˜ íƒ€ì…ì— ë”°ë¼ ë°˜í™˜ íƒ€ì…ì´ ë‹¬ë¼ì§„ë‹¤.**

ë‹¤ìŒì€ `useRef`ì˜ ì„¸ ê°€ì§€ íƒ€ì… ì •ì˜ì´ë‹¤.

```
function useRef<T>(initialValue: T): MutableRefObject<T>;
function useRef<T>(initialValue: T | null): RefObject<T>;
function useRef<T = undefined>(): MutableRefObject<T | undefined>;

```

### ğŸ”¹ `MutableRefObject<T>`

- `current` ê°’ì„ **ë³€ê²½í•  ìˆ˜ ìˆìŒ**.
- ì²« ë²ˆì§¸ íƒ€ì… ì •ì˜ë¥¼ ë”°ë¦„.
- ì˜ˆ: `useRef<T>(initialValue: T)`

```
interface MutableRefObject<T> {
  current: T;
}

```

### ğŸ”¹ `RefObject<T>`

- `current` ê°’ì´ **ì½ê¸° ì „ìš©(`readonly`)**.
- ë‘ ë²ˆì§¸ íƒ€ì… ì •ì˜ë¥¼ ë”°ë¦„.
- ì˜ˆ: `useRef<T>(initialValue: T | null)`

```
interface RefObject<T> {
  readonly current: T | null;
}

```

---

## `useRef`ì˜ ì œë„¤ë¦­ê³¼ ì´ˆê¸°ê°’ì— ë”°ë¥¸ ë™ì‘ ì°¨ì´

### `MutableRefObject<T>` (ê°’ ë³€ê²½ ê°€ëŠ¥)

```
const ref = useRef<HTMLInputElement>(document.createElement("input"));

```

- ì´ˆê¸°ê°’ì„ **`null`ì´ ì•„ë‹Œ ê°’**ìœ¼ë¡œ ì„¤ì • â†’ `MutableRefObject<T>` ë°˜í™˜.
- `ref.current`ì˜ ê°’ì„ **ìˆ˜ì •í•  ìˆ˜ ìˆìŒ**.

### `RefObject<T>` (ê°’ ë³€ê²½ ë¶ˆê°€)

```
const ref = useRef<HTMLInputElement>(null);

```

- ì´ˆê¸°ê°’ì„ **`null`** ë¡œ ì„¤ì • â†’ `RefObject<T>` ë°˜í™˜.
- `ref.current`ëŠ” `readonly`ê°€ ë˜ì–´ **ì„ì˜ë¡œ ë³€ê²½í•  ìˆ˜ ì—†ìŒ**.

---

### ìì‹ ì»´í¬ë„ŒíŠ¸ì— `ref` ì „ë‹¬í•˜ê¸°

ë¦¬ì•¡íŠ¸ì—ì„œëŠ” `<button />`ì´ë‚˜ `<input />` ê°™ì€ **HTML ìš”ì†Œ**ë¿ë§Œ ì•„ë‹ˆë¼, **ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ë„ `ref`ë¥¼ ì „ë‹¬**í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ **ì¼ë°˜ì ì¸ props ë°©ì‹ìœ¼ë¡œ `ref`ë¥¼ ë„˜ê¸°ë©´ ë¸Œë¼ìš°ì €ì—ì„œ ê²½ê³  ë©”ì‹œì§€ê°€ ì¶œë ¥**ëœë‹¤.

---

## ì¼ë°˜ì ì¸ `ref` ì „ë‹¬ ë°©ì‹ì˜ ë¬¸ì œ

```tsx
import { useRef } from "react";

const Component = () => {
  const ref = useRef<HTMLInputElement>(null);
  return <MyInput ref={ref} />;
};

interface Props {
  ref: RefObject<HTMLInputElement>;
}

const MyInput = ({ ref }: Props) => {
  return <input ref={ref} />;
};

```

### ê²½ê³  ë©”ì‹œì§€ ë°œìƒ:

> Warning: MyInput: 'ref' is not a prop.
> 
> 
> Trying to access it will result in `undefined` being returned.
> 

### ì›ì¸:

- `ref`ëŠ” ë¦¬ì•¡íŠ¸ì—ì„œ **íŠ¹ìˆ˜í•œ ì†ì„±**ìœ¼ë¡œ ì‚¬ìš©ë˜ë¯€ë¡œ, ì¼ë°˜ì ì¸ `props` ë°©ì‹ìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ ì—†ë‹¤.

---

## `forwardRef`ë¥¼ ì‚¬ìš©í•˜ì—¬ `ref` ì „ë‹¬í•˜ê¸°

`forwardRef`ë¥¼ ì‚¬ìš©í•˜ë©´ **ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒì„±í•œ `ref`ë¥¼ ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.**

```tsx
import { forwardRef, useRef } from "react";

interface Props {
  name: string;
}

const MyInput = forwardRef<HTMLInputElement, Props>((props, ref) => {
  return (
    <div>
      <label>{props.name}</label>
      <input ref={ref} />
    </div>
  );
});

```

- `forwardRef`ì˜ ë‘ ë²ˆì§¸ ì¸ìë¡œ `ref`ë¥¼ ë°›ìœ¼ë©´, ì´ë¥¼ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ DOM ìš”ì†Œì— ì—°ê²°í•  ìˆ˜ ìˆë‹¤.
- `props`ë¥¼ ê·¸ëŒ€ë¡œ ë°›ìœ¼ë©°, ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.

### `forwardRef` ì ìš© í›„ ì •ìƒ ë™ì‘í•˜ëŠ” ì½”ë“œ:

```tsx
const Component = () => {
  const ref = useRef<HTMLInputElement>(null);
  return <MyInput ref={ref} name="ì´ë¦„ ì…ë ¥" />;
};

```

---

## `forwardRef`ì˜ íƒ€ì… ì •ì˜

`forwardRef`ì˜ íƒ€ì… ì •ì˜ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```
function forwardRef<T, P = {}>(
  render: ForwardRefRenderFunction<T, P>
): ForwardRefExoticComponent<PropsWithoutRef<P> & RefAttributes<T>>;

```

### `ForwardRefRenderFunction<T, P>` íƒ€ì… ì •ì˜:

```
interface ForwardRefRenderFunction<T, P = {}> {
  (props: P, ref: ForwardedRef<T>): ReactElement | null;
  displayName?: string | undefined;
  defaultProps?: never | undefined;
  propTypes?: never | undefined;
}

```

- `T`: **`ref`ë¡œ ì „ë‹¬í•  ìš”ì†Œì˜ íƒ€ì…** (ì˜ˆ: `HTMLInputElement`)
- `P`: **ì»´í¬ë„ŒíŠ¸ì˜ `props` íƒ€ì…** (ì˜ˆ: `{ name: string }`)
- `ref`ëŠ” **ForwardedRef íƒ€ì…**ì„ ê°€ì§€ë©°, `MutableRefObject<T | null>`ë¡œ ì „ë‹¬ë¨.

---

## `ForwardedRef<T>`ì˜ ì •ì˜

```
type ForwardedRef<T> =
  | ((instance: T | null) => void)
  | MutableRefObject<T | null>
  | null;
```

ì•ì„œ useRef ì˜ ë°˜í™˜ íƒ€ì…ì€ MutableRefObject<T> ë˜ëŠ” RefObject<T> ê°€ ë ìˆ˜ ìˆë‹¤ê³  í–ˆëŠ”ë°, ForwardedRef ì—ëŠ” ì˜¤ì§ MutableRefObjectë§Œ ë“¤ì–´ì˜¬ ìˆ˜ ìˆë‹¤.

MutableRefObjectê°€  RefObject ë³´ë‹¤ ë„“ì€ ë²”ìœ„ì˜ íƒ€ì…ì„ ê°€ì§€ê¸° ë•Œë¬¸ì—, ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ref ë¥¼ ì–´ë–»ê²Œ ì„ ì–¸í–ˆëŠ”ì§€ì™€ ìƒê´€ì—†ì´ ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ í•´ë‹¹ ref ë¥¼ ìˆ˜ìš©í•  ìˆ˜ ìˆë‹¤.

- **`ForwardedRef<T>`ëŠ” `MutableRefObject<T | null>`ë§Œ í—ˆìš©**í•œë‹¤.
- **ì¦‰, ë¶€ëª¨ì—ì„œ `useRef<HTMLInputElement | null>`ë¡œ ì„ ì–¸í•œ ê²½ìš°ë¼ë„, ìì‹ì—ì„œëŠ” `MutableRefObject`ë¡œ ë³€í™˜ë˜ì–´ ì‚¬ìš© ê°€ëŠ¥**í•˜ë‹¤.

---

## `forwardRef` ì—†ì´ `ref`ë¥¼ ì „ë‹¬í•˜ëŠ” ë°©ë²•

ë§Œì•½ `forwardRef`ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  `ref`ë¥¼ ì „ë‹¬í•˜ë ¤ë©´, **`ref`ì˜ ì´ë¦„ì„ ë³€ê²½**í•´ì•¼ í•œë‹¤.

```tsx
interface Props {
  inputRef: RefObject<HTMLInputElement>;
}

const MyInput = ({ inputRef }: Props) => {
  return <input ref={inputRef} />;
};

```

ì´ë ‡ê²Œ í•˜ë©´ **ë¦¬ì•¡íŠ¸ì˜ `ref` ì†ì„±ê³¼ ì¶©ëŒí•˜ì§€ ì•Šìœ¼ë©°**, ì¼ë°˜ì ì¸ `props` ë°©ì‹ìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

---

### `useImperativeHandle`

`useImperativeHandle`ì€ `forwardRef`ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” React í›…ì´ë‹¤.

ì´ í›…ì„ í™œìš©í•˜ë©´ **ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ `ref`ë¥¼ í†µí•´ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ ì»¤ìŠ¤í…€ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.**

ì´ë¥¼ í†µí•´ **ìì‹ ì»´í¬ë„ŒíŠ¸ëŠ” ë‚´ë¶€ ìƒíƒœë¥¼ ìœ ì§€í•˜ë©´ì„œ, ë¶€ëª¨ì™€ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶œ ìˆ˜ ìˆë‹¤.**

---

## `useImperativeHandle`ì„ í™œìš©í•œ `submit` í•¨ìˆ˜ ì •ì˜

```tsx
// <form> íƒœê·¸ì˜ submit í•¨ìˆ˜ë¥¼ ë”°ë¡œ ì •ì˜
type CreateFormHandle = Pick<HTMLFormElement, "submit">;

type CreateFormProps = {
  defaultValues?: CreateFormValue;
};

// ForwardRefRenderFunctionì„ ì‚¬ìš©í•˜ì—¬ ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¶€ëª¨ê°€ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ì •ì˜
const JobCreateForm: React.ForwardRefRenderFunction<CreateFormHandle, CreateFormProps> = (
  props,
  ref
) => {
  // useImperativeHandleì„ í™œìš©í•˜ì—¬ submit ë©”ì„œë“œë¥¼ ë¶€ëª¨ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•¨
  useImperativeHandle(ref, () => ({
    submit: () => {
      /* submit ì‘ì—…ì„ ì§„í–‰ */
    },
  }));
};

```

ìœ„ ì½”ë“œì—ì„œ:

- `useImperativeHandle(ref, () => ({ submit: () => { /* submit ì‘ì—… */ } }));`
    - **ë¶€ëª¨ê°€ `ref`ë¥¼ í†µí•´ `submit`ì„ ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ í•¨.**
- `Pick<HTMLFormElement, "submit">`
    - **`HTMLFormElement`ì˜ `submit` ë©”ì„œë“œë§Œ ì„ íƒí•˜ì—¬ ì‚¬ìš©.**

---

## 2ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ `ref`ë¥¼ ì‚¬ìš©í•˜ì—¬ `submit` í˜¸ì¶œ

```tsx
const CreatePage: React.FC = () => {
  // ìì‹ì˜ refë¥¼ ì €ì¥í•  useRef ìƒì„±
  const refForm = useRef<CreateFormHandle>(null);

  const handleSubmitButtonClick = () => {
    // refë¥¼ í†µí•´ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ submit ë©”ì„œë“œë¥¼ ì‹¤í–‰
    refForm.current?.submit();
  };

  return (
    <div>
      <JobCreateForm ref={refForm} />
      <button onClick={handleSubmitButtonClick}>ì œì¶œ</button>
    </div>
  );
};

```

 `useImperativeHandle` ì‚¬ìš©ì˜ íš¨ê³¼:

- ë¶€ëª¨ëŠ” **ìì‹ì˜ ë‚´ë¶€ ë¡œì§ì„ ì§ì ‘ ì¡°ì‘í•˜ì§€ ì•Šê³ **, `ref`ë¥¼ í†µí•´ **ì œê³µëœ ë©”ì„œë“œë§Œ í˜¸ì¶œ**í•  ìˆ˜ ìˆë‹¤.
- ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ **ë‚´ë¶€ ìƒíƒœì™€ ë¡œì§ì„ ë³´í˜¸í•˜ë©´ì„œ, í•„ìš”í•œ ê¸°ëŠ¥ë§Œ ë…¸ì¶œ**í•  ìˆ˜ ìˆë‹¤.

---

## `useRef`ì˜ ì—¬ëŸ¬ ê°€ì§€ íŠ¹ì„±

`useRef`ëŠ” **DOM ìš”ì†Œë¥¼ ì €ì¥**í•˜ëŠ” ê²ƒ ì™¸ì—ë„ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ í™œìš©ë  ìˆ˜ ìˆë‹¤.

### `useRef`ë¡œ ê´€ë¦¬ë˜ëŠ” ë³€ìˆ˜ì˜ íŠ¹ì§•:

1. **ê°’ì´ ë³€ê²½ë˜ì–´ë„ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ì§€ ì•ŠëŠ”ë‹¤.**
2. **ìƒíƒœ ë³€ê²½ í›„ ì¦‰ì‹œ ìµœì‹  ê°’ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.**

ì´ëŸ¬í•œ íŠ¹ì„±ì„ í™œìš©í•˜ë©´ **ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ í”¼í•˜ë©´ì„œ, ê°’ì˜ ë³€í™”ë¥¼ ì¦‰ì‹œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.**

---

## `useRef`ë¥¼ í™œìš©í•œ `autoplay` ê´€ë¦¬

```tsx
type BannerProps = {
  autoplay: boolean;
};

const Banner: React.FC<BannerProps> = ({ autoplay }) => {
  const isAutoPlayPause = useRef(false);

  if (autoplay) {
    // isAutoPlayPause.current ê°’ì„ ì¦‰ì‹œ í™œìš© ê°€ëŠ¥
    const keepAutoPlay = touchPoints[0] && isAutoPlayPause.current;
    // ...
  }

  return (
    <>
      {autoplay && (
        <button
          aria-label="ìë™ ì¬ìƒ ì¼ì‹œ ì •ì§€"
          onClick={() => {
            isAutoPlayPause.current = true;
          }}
        >
          ì¼ì‹œ ì •ì§€
        </button>
      )}
    </>
  );
};

```

### `useRef`ë¥¼ ì‚¬ìš©í•œ `isAutoPlayPause`ì˜ ì—­í• :

- **ë Œë”ë§ê³¼ ê´€ê³„ì—†ì´ ê°’ì„ ì¦‰ì‹œ ì—…ë°ì´íŠ¸ ê°€ëŠ¥** (`current` ê°’ì„ ë³€ê²½í•´ë„ ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•ŠìŒ).
- **ìƒíƒœ(`useState`)ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ ë¶ˆí•„ìš”í•œ ë Œë”ë§ì„ ë°©ì§€**.

---

## React í›…ì˜ ê·œì¹™

React í›…ì„ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ **ë‹¤ìŒ ë‘ ê°€ì§€ ê·œì¹™ì„ ë°˜ë“œì‹œ ì§€ì¼œì•¼ í•œë‹¤.**

### í›…ì€ í•­ìƒ **ìµœìƒìœ„ ë ˆë²¨**ì—ì„œ í˜¸ì¶œí•´ì•¼ í•œë‹¤.

```tsx
// âŒ ì˜ëª»ëœ ì˜ˆì‹œ: ì¡°ê±´ë¬¸ ë‚´ë¶€ì—ì„œ í›… í˜¸ì¶œ
if (someCondition) {
  const [state, setState] = useState(false); // âŒ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥
}

// âŒ ì˜ëª»ëœ ì˜ˆì‹œ: ë°˜ë³µë¬¸ ë‚´ë¶€ì—ì„œ í›… í˜¸ì¶œ
for (let i = 0; i < 3; i++) {
  const [count, setCount] = useState(0); // âŒ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥
}

```

### í›…ì€ **ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë˜ëŠ” ì»¤ìŠ¤í…€ í›… ë‚´ë¶€ì—ì„œë§Œ í˜¸ì¶œ**í•´ì•¼ í•œë‹¤.

```tsx
// âŒ ì˜ëª»ëœ ì˜ˆì‹œ: ì¼ë°˜ í•¨ìˆ˜ì—ì„œ í›… í˜¸ì¶œ
function someFunction() {
  const [value, setValue] = useState(0); // âŒ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥
}

```

### ì˜¬ë°”ë¥¸ ì‚¬ìš© ì˜ˆì‹œ:

```tsx
const MyComponent = () => {
  const [state, setState] = useState(false); // âœ… ìµœìƒìœ„ì—ì„œ í›… ì‚¬ìš©

  return <div />;
};

```

---

## í›… ê·œì¹™ì„ ì§€ì¼œì•¼ í•˜ëŠ” ì´ìœ 

- ReactëŠ” **í›…ì˜ í˜¸ì¶œ ìˆœì„œì— ì˜ì¡´**í•œë‹¤.
- í›…ì´ **ì¡°ê±´ë¬¸, ë°˜ë³µë¬¸ ë‚´ë¶€ì—ì„œ í˜¸ì¶œë˜ë©´, í˜¸ì¶œ ìˆœì„œê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ React ë‚´ë¶€ ìƒíƒœê°€ ê¼¬ì¼ ìœ„í—˜**ì´ ìˆë‹¤.
- ë”°ë¼ì„œ **ëª¨ë“  ë Œë”ë§ì—ì„œ í›…ì˜ í˜¸ì¶œ ìˆœì„œê°€ í•­ìƒ ë™ì¼í•˜ê²Œ ìœ ì§€ë˜ì–´ì•¼ í•œë‹¤.**

---

### 9.2 ì»¤ìŠ¤í…€ í›… (Custom Hooks)

ë¦¬ì•¡íŠ¸ì—ì„œëŠ” `useState`, `useEffect`, `useRef` ë“±ì˜ ê¸°ë³¸ í›… ì™¸ì—ë„ **ì‚¬ìš©ì ì •ì˜(Custom) í›…**ì„ ë§Œë“¤ì–´ ì»´í¬ë„ŒíŠ¸ ë¡œì§ì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

---

## 9.2.1 ë‚˜ë§Œì˜ í›… ë§Œë“¤ê¸°

### ì»¤ìŠ¤í…€ í›… ê·œì¹™

1. **ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥**í•˜ë‹¤.
2. **ì´ë¦„ì€ ë°˜ë“œì‹œ `use`ë¡œ ì‹œì‘**í•´ì•¼ í•œë‹¤.

### ğŸ“Œ `useInput` ì˜ˆì œ (ê¸°ë³¸ ë²„ì „)

```tsx
import { useState } from "react";

const useInput = (initialValue) => {
  const [value, setValue] = useState(initialValue);

  const onChange = (e) => {
    setValue(e.target.value);
  };

  return { value, onChange };
};

```

- `useInput` í›…ì€:
    - `initialValue`ë¥¼ `useState`ë¡œ ê´€ë¦¬.
    - `onChange` í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ì—¬ **`input` ìš”ì†Œì—ì„œ ê°’ ë³€ê²½ì„ ì‰½ê²Œ ì²˜ë¦¬**í•  ìˆ˜ ìˆë„ë¡ í•¨.

### âœ… `useInput`ì„ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ì˜ˆì œ

```tsx
const MyComponent = () => {
  const { value, onChange } = useInput("");

  return (
    <div>
      <h1>{value}</h1>
      <input onChange={onChange} value={value} />
    </div>
  );
};

export default MyComponent;

```

- `useInput`ì„ ì‚¬ìš©í•˜ì—¬ **ì…ë ¥ ê°’ì„ ì‰½ê²Œ ê´€ë¦¬**í•  ìˆ˜ ìˆë‹¤.

---

## 9.2.2 íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ì»¤ìŠ¤í…€ í›… ê°•í™”í•˜ê¸°

ìœ„ì˜ `useInput` í›…ì„ **íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³€í™˜**í•˜ë©´, ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

### íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì˜¤ë¥˜ ë°œìƒ

```tsx
const useInput = (initialValue) => {
  const [value, setValue] = useState(initialValue);

  const onChange = useCallback((e) => {
    setValue(e.target.value);
  }, []);

  return { value, onChange };
};

export default useInput;

```

**âš ï¸ ë°œìƒí•˜ëŠ” ì—ëŸ¬**

1. `initialValue`ì˜ íƒ€ì…ì´ **ì•”ì‹œì ìœ¼ë¡œ `any` íƒ€ì…** (`ts(7006)`)
2. `onChange`ì—ì„œ `e`ì˜ íƒ€ì…ì´ **ì•”ì‹œì ìœ¼ë¡œ `any` íƒ€ì…** (`ts(7006)`)

---

### íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì ìš©í•œ `useInput`

```tsx
import { useState, useCallback, ChangeEvent } from "react";

// initialValueì— string íƒ€ì…ì„ ì •ì˜
const useInput = (initialValue: string) => {
  const [value, setValue] = useState(initialValue);

  // onChange í•¨ìˆ˜ì˜ ì´ë²¤íŠ¸ ê°ì²´ eì— ChangeEvent<HTMLInputElement> íƒ€ì…ì„ ì •ì˜
  const onChange = useCallback((e: ChangeEvent<HTMLInputElement>) => {
    setValue(e.target.value);
  }, []);

  return { value, onChange };
};

export default useInput;

```

**âœ¨ ê°œì„ ëœ ì **

- `initialValue: string` â†’ **ì´ˆê¸° ê°’ì´ ë¬¸ìì—´(`string`)ì´ì–´ì•¼ í•¨ì„ ëª…ì‹œ**.
- `onChange`ì˜ ì¸ìë¡œ ë°›ëŠ” `e`ì˜ íƒ€ì…ì„ **`ChangeEvent<HTMLInputElement>`ë¡œ ì§€ì •**í•˜ì—¬ ì»´íŒŒì¼ ì˜¤ë¥˜ ë°©ì§€.

---

## `ChangeEvent<HTMLInputElement>`ë€?

- **`onChange`ì—ì„œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ ê°ì²´ì˜ íƒ€ì…**.
- `input` ìš”ì†Œì—ì„œ ë°œìƒí•˜ëŠ” `e.target.value`ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
- **IDEì—ì„œ ìë™ì™„ì„± ê¸°ëŠ¥ì„ í™œìš©í•˜ë©´ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆìŒ.**

---
